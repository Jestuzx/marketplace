<table>
    <tr>
        <th>Product</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Total</th>
    </tr>
    {% for product in products %}
    <tr>
        <td>{{ product.name }}</td>
        <td>
            <form hx-post="{% url 'update_cart' product.id %}" hx-target="#cart-table" hx-swap="outerHTML">
                {% csrf_token %}
                <input type="hidden" name="action" value="remove">
                <button type="submit">-</button>
            </form>
            {{ cart|get_item:product.id }}
            <form hx-post="{% url 'update_cart' product.id %}" hx-target="#cart-table" hx-swap="outerHTML">
                {% csrf_token %}
                <input type="hidden" name="action" value="add">
                <button type="submit">+</button>
            </form>
        </td>
        <td>{{ product.price }}</td>
        <td>{{ product.price|floatformat:2|add:""|floatformat:2|floatformat }} usd</td>
    </tr>
    {% endfor %}
</table>

<p>
    <strong>Total:</strong>
    {{ products|calc_total:cart }} usd
</p>
